<!DOCTYPE html>
<html>
<head>
<style type="text/css">
    body {
        background: #333;
        text-align: center;
        margin:10px;
    }
    #wrapper {
        margin: 0 auto;
    }
    #wrapper,
    #videoCanvas {
        width: 320px;
        height: 180px;
    }
    #videoCanvas {
    }
</style>
</head>

<body>

<div id="wrapper">
    <input type="button" onclick="player.pause();" value="Pause" />
    <input type="button" onclick="player.play();" value="Play" />
    <br />
    <br />
    <canvas id="videoCanvas" width="320" height="180"></canvas>
</div>

<script type="text/javascript" src="../bin/jsmpg.js"></script>
<script type="text/javascript">
    var canvas = document.getElementById('videoCanvas');
    
    //var ctx = canvas.getContext('2d');
    //ctx.fillStyle = '#444';
    //ctx.fillText('Loading...', canvas.width/2-30, canvas.height/3);
    
    function preloader(evt) {
        var percent = evt.loaded / evt.total;

        if (percent >= 1) {
            console.log('File load completed.');
        } else {
            console.log(Math.floor(percent*100) || 0);
        }
    }
    
    function handle(evt) {
        console.log(evt.type, evt.data && evt.data.currentProgress);
    }
    
    function onload(player) {
        player.addEventListener('play', handle);
        player.addEventListener('playing', handle);
        //player.addEventListener('timeupdate', handle);
        player.addEventListener('pause', handle);
        player.addEventListener('ended', handle);
    }

    var url = './office-ambient.mpg';
    var player = new jsmpeg(url, {
        canvas: canvas,
        autoplay: true,
        loop: false,
        preloader: preloader,
        onload: onload
    });

    
</script>

</body>
</html>
